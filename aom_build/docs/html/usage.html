<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AOMedia Codec SDK: Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AOMedia Codec SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The aom multi-format codec SDK provides a unified interface amongst its supported codecs. This abstraction allows applications using this SDK to easily support multiple video formats with minimal code duplication or "special casing." This section describes the interface common to all codecs. For codec-specific details, see the <a class="el" href="group__codecs.html">Supported Codecs</a> page.</p>
<p>The following sections are common to all codecs:</p><ul>
<li><a class="el" href="usage.html#usage_types">Important Data Types</a></li>
<li><a class="el" href="usage.html#usage_features">Features</a></li>
<li><a class="el" href="usage.html#usage_init">Initialization</a></li>
<li><a class="el" href="usage.html#usage_errors">Error Handling</a></li>
</ul>
<p>For more information on decoder and encoder specific usage, see the following pages: </p><ul>
<li><a class="el" href="usage_decode.html">Decoding</a> </li>
<li><a class="el" href="usage_encode.html">Encoding</a></li>
</ul>
<h1><a class="anchor" id="usage_types"></a>
Important Data Types</h1>
<p>There are two important data structures to consider in this interface.</p>
<h2><a class="anchor" id="usage_ctxs"></a>
Contexts</h2>
<p>A context is a storage area allocated by the calling application that the codec may write into to store details about a single instance of that codec. Most of the context is implementation specific, and thus opaque to the application. The context structure as seen by the application is of fixed size, and thus can be allocated with automatic storage or dynamically on the heap.</p>
<p>Most operations require an initialized codec context. Codec context instances are codec specific. That is, the codec to be used for the encoded video must be known at initialization time. See <a class="el" href="group__codec.html#ga9a1d27f9742d9f70783e3c6cb849b5b4" title="Codec context structure. ">aom_codec_ctx_t</a> for further information.</p>
<h2><a class="anchor" id="usage_ifaces"></a>
Interfaces</h2>
<p>A codec interface is an opaque structure that controls how function calls into the generic interface are dispatched to their codec-specific implementations. Applications <a class="el" href="rfc2119.html#MUSTNOT">MUST NOT</a> attempt to examine or override this storage, as it contains internal implementation details likely to change from release to release.</p>
<p>Each supported codec will expose an interface structure to the application as an <code>extern</code> reference to a structure of the incomplete type <a class="el" href="group__codec.html#ga4ef55b44c762836d1550e11921bed403" title="Codec interface structure. ">aom_codec_iface_t</a>.</p>
<h1><a class="anchor" id="usage_features"></a>
Features</h1>
<p>Several "features" are defined that are optionally implemented by codec algorithms. Indeed, the same algorithm may support different features on different platforms. The purpose of defining these features is that when they are implemented, they conform to a common interface. The features, or capabilities, of an algorithm can be queried from it's interface by using the <a class="el" href="group__codec.html#ga66b1d3c795c3868efc88d73d01439461" title="Get the capabilities of an algorithm. ">aom_codec_get_caps()</a> method. Attempts to invoke features not supported by an algorithm will generally result in <a class="el" href="group__codec.html#ggaaae61e0f8663e6137f1e228757248e7cac4a4eea6394661cef74abf674c12cfa8" title="Algorithm does not have required capability. ">AOM_CODEC_INCAPABLE</a>.</p>
<p>Currently defined decoder features include:</p><ul>
<li><a class="el" href="usage_decode.html#usage_cb">Callback Based Decoding</a></li>
</ul>
<h1><a class="anchor" id="usage_init"></a>
Initialization</h1>
<p>To initialize a codec instance, the address of the codec context and interface structures are passed to an initialization function. Depending on the <a class="el" href="usage.html#usage_features">Features</a> that the codec supports, the codec could be initialized in different modes.</p>
<p>To prevent cases of confusion where the ABI of the library changes, the ABI is versioned. The ABI version number must be passed at initialization time to ensure the application is using a header file that matches the library. The current ABI version number is stored in the preprocessor macros <a class="el" href="group__codec.html#ga801627e3edca037cef7a92f7fecd75ef" title="Current ABI version number. ">AOM_CODEC_ABI_VERSION</a>, <a class="el" href="group__encoder.html#gae4af664f2049d5b7d7b644d9a61d497c" title="Current ABI version number. ">AOM_ENCODER_ABI_VERSION</a>, and <a class="el" href="group__decoder.html#ga23378c7ca8c361c097181aaaa2a5a734" title="Current ABI version number. ">AOM_DECODER_ABI_VERSION</a>. For convenience, each initialization function has a wrapper macro that inserts the correct version number. These macros are named like the initialization methods, but without the _ver suffix.</p>
<p>The available initialization methods are: </p><ul>
<li><a class="el" href="group__encoder.html#gaade68a7d33d30f97dc9a596aa5e065d8" title="Convenience macro for aom_codec_enc_init_ver() ">aom_codec_enc_init</a> (calls <a class="el" href="group__encoder.html#ga205cf6f9460f4b4a842872012ef6fb0c" title="Initialize an encoder instance. ">aom_codec_enc_init_ver()</a>) </li>
<li><a class="el" href="group__encoder.html#ga4410c689b0f8d0b75aca881ff7b25253" title="Convenience macro for aom_codec_enc_init_multi_ver() ">aom_codec_enc_init_multi</a> (calls <a class="el" href="group__encoder.html#gad3dfb2298402298abadb2c1b059b5f0b" title="Initialize multi-encoder instance. ">aom_codec_enc_init_multi_ver()</a>) </li>
<li><a class="el" href="group__decoder.html#gafdbfca65b19ab1f6d72b32cd01753b9b" title="Convenience macro for aom_codec_dec_init_ver() ">aom_codec_dec_init</a> (calls <a class="el" href="group__decoder.html#gab2bfd2f5517b9452d2c71b7c2b2e8e8d" title="Initialize a decoder instance. ">aom_codec_dec_init_ver()</a>)</li>
</ul>
<h1><a class="anchor" id="usage_errors"></a>
Error Handling</h1>
<p>Almost all codec functions return an error status of type <a class="el" href="group__codec.html#gaaae61e0f8663e6137f1e228757248e7c" title="Algorithm return codes. ">aom_codec_err_t</a>. The semantics of how each error condition should be processed is clearly defined in the definitions of each enumerated value. Error values can be converted into ASCII strings with the <a class="el" href="group__codec.html#ga50949c0854605c722832bbfb0803f5f4" title="Retrieve error synopsis for codec context. ">aom_codec_error()</a> and <a class="el" href="group__codec.html#ga83c6525528574d1a88e73a9f605c9115" title="Convert error number to printable string. ">aom_codec_err_to_string()</a> methods. The difference between these two methods is that <a class="el" href="group__codec.html#ga50949c0854605c722832bbfb0803f5f4" title="Retrieve error synopsis for codec context. ">aom_codec_error()</a> returns the error state from an initialized context, whereas <a class="el" href="group__codec.html#ga83c6525528574d1a88e73a9f605c9115" title="Convert error number to printable string. ">aom_codec_err_to_string()</a> can be used in cases where an error occurs outside any context. The enumerated value returned from the last call can be retrieved from the <code>err</code> member of the decoder context as well. Finally, more detailed error information may be able to be obtained by using the <a class="el" href="group__codec.html#ga43a70562598b485685794a4e9d9d53f7" title="Retrieve detailed error information for codec context. ">aom_codec_error_detail()</a> method. Not all errors produce detailed error information.</p>
<p>In addition to error information, the codec library's build configuration is available at runtime on some platforms. This information can be returned by calling <a class="el" href="group__codec.html#gaf72432504daf378befd8b3c122f14c01" title="Return the build configuration. ">aom_codec_build_config()</a>, and is formatted as a base64 coded string (comprised of characters in the set [a-z_a-Z0-9+/]). This information is not useful to an application at runtime, but may be of use to aom for support. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
